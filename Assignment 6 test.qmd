---
title: "test6"
format: html
editor: visual
---

## Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Running Code

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r}
install.packages("tidyverse")
install.packages("readxl")
install.packages("sf")
install.packages("terra")
install.packages("mapview")
install.packages("bcdata")
install.packages("bcmaps")

library(readxl)
library(sf)
library(tidyverse)
library(mapview)
library(terra)
library(bcmaps)
library(dplyr)
library(bcdata)



park_search_results <- bcdc_search("BC Parks Ecological Reserves Protected Areas")
View(park_search_results)

protected_areas <- bcdc_get_data(record = "1130248f-f1a3-4956-8b2e-38d29d3e4af7")
view(protected_areas)

LDB <- protected_areas %>%
  filter(PROTECTED_LANDS_NAME == "LAC DU BOIS GRASSLANDS PROTECTED AREA")
mapview(LDB)

fire_search_results <- bcdc_search("Fire")
View(fire_search_results)

fire_points <- bcdc_get_data(record = "e2dadc60-292f-4d98-b42b-56ca9e4fe694")
view(fire_points)

fires_in_LDB <- fire_points[st_intersects(fire_points, LDB, sparse = FALSE), ]
mapview(fires_in_LDB) + mapview(LDB)

## DON't USE THIS SECTION
read.csv("H_FIRE_PNT.csv")
fire_points <- read.csv("H_FIRE_PNT.csv")

fire_sf <- st_as_sf(fire_points, coords = c("X_COORDINATE", "Y_COORDINATE"), crs = 3005)

park <- st_read("TA_PEP_SVW_polygon.shp")


fire_sf <- st_transform(fire_sf, st_crs(park))

LDB <- park %>%
  filter(PROT_NAME == "LAC DU BOIS GRASSLANDS PROTECTED AREA")

mapview(LDB)

fires_in_LDB <- fire_sf[st_intersects(fire_sf, LDB, sparse = FALSE), ]

mapview(LDB) + mapview(fires_in_LDB)
##RESTART AFTER THIS SECTION

fires_per_year <- fires_in_LDB %>%
  group_by(FIRE_YEAR) %>%
  summarise(number_of_fires = n())

fire_cause <- fires_in_LDB %>%
  group_by(FIRE_CAUSE) %>%
  summarise(number_of_fires = n())

mapview(fires_in_LDB, zcol = "FIRE_CAUSE", legend = TRUE) + mapview(LDB)

fires_summary <- fires_in_LDB %>%
  group_by(FIRE_YEAR, FIRE_CAUSE) %>%
  summarise(number_of_fires = n(), .groups = "drop")

library(ggplot2)

ggplot(fires_summary, aes(x = FIRE_CAUSE, y = number_of_fires, fill = FIRE_CAUSE)) +
  geom_boxplot() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) + 
  labs(title = "Fires Per Year by Cause",
       x = "Fire Cause",
       y = "Number of Fires")

```

You can add options to executable code like this

```{r}
#| echo: false
2 * 2
```

The `echo: false` option disables the printing of code (only output is displayed).
